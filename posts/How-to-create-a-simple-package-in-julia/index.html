<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/blogs/libs/katex/katex.min.css"> <link rel=stylesheet  href="/blogs/libs/highlight/github.min.css"> <link rel=stylesheet  href="/blogs/css/franklin.css"> <link rel=stylesheet  href="/blogs/css/tufte.css"> <link rel=stylesheet  href="/blogs/css/latex.css"> <link rel=stylesheet  href="/blogs/css/adjust.css"> <link rel=stylesheet  href="/blogs/css/FranklinTheorems.css"> <link rel=icon  href="/blogs/assets/favicon.png"> <title>How to create a simple package in Julia</title> <link rel=icon  href="/blogs/assets/favicon.ico"> <script src="/blogs/libs/lunr/lunr.min.js"></script> <script src="/blogs/libs/lunr/lunr_index.js"></script> <script src="/blogs/libs/lunr/lunrclient.min.js"></script> <div id=layout > <div id=menu > <ul> <li><a href="/blogs/">Blogs</a> <li><a href="/blogs/index.html#tags">Tags</a> <li><a href="https://shuvomoy.github.io/">Website</a> <li><form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder=" " type=text > <input type=submit  value=Search  formaction="/blogs/search/index.html"> </form> </ul> </div> <div id=main > <!-- Content appended here .result-title a { text-decoration: none; } .result-title a:hover { text-decoration: underline; } .result-preview { color: #808080; } .resultCount { color: #808080; } .result-query { font-weight: bold; } #lunrSearchForm { margin-top: 1em; } --> <div class=franklin-content ><h1 id=how_to_create_a_simple_package_in_julia ><a href="#how_to_create_a_simple_package_in_julia" class=header-anchor >How to create a simple package in Julia</a></h1> <p><strong>Shuvomoy Das Gupta</strong></p> <p><em>March 22, 2020</em></p> <p>Thomson&#39;s Rule for First-Time Telescope Makers: <em>&quot;It is faster to make a four-inch mirror then a six-inch mirror than to make a six-inch mirror.&quot;</em></p> <p>In this blog, we discuss how to create a simple package in <code>Julia</code> that computes the proximal operator of a convex quadratic function. The goal is just to illustrate how to create a structured solver package, the code underlying the solver is very inefficient. Let us call our package <code>TestPackage</code>. </p> <hr /> <p><strong>Table of contents</strong></p> <div class=franklin-toc ><ol><li><a href="#step_0_the_inner_mechanism_of_the_package">Step 0. The inner mechanism of the package</a><ol><li><a href="#structure_of_the_package">Structure of the package</a></ol><li><a href="#step_1_ensure_git_and_github_are_set_up_properly">Step 1. Ensure <code>Git</code> and <code>Github</code> are set up properly</a><li><a href="#step_2_install_a_few_helpful_packages_for_package_development">Step 2. Install a few helpful packages for package development</a><li><a href="#step_3_create_the_blank_package_testpackage_using_pkgtemplates">Step 3. Create the blank package <code>TestPackage</code> using <code>PkgTemplates</code></a><li><a href="#step_4_create_the_julia_files">Step 4. Create the julia files</a><ol><li><a href="#files_in_src_folder">Files in <code>src</code> folder ##</a><li><a href="#files_in_test_folder">Files in <code>test</code> folder</a></ol><li><a href="#step_5_test_the_package_and_upload_the_files_to_github">Step 5. Test the package and upload the files to Github</a></ol></div> <hr /> <p>We will go through the following 6 steps in order to create a fully functioning package in Julia:</p> <ul> <li><p>Step 0. The inner mechanism of the package</p> <li><p>Step 1. Ensure <code>Git</code> and <code>Github</code> are set up properly</p> <li><p>Step 2. Install a few helpful packages for package development</p> <li><p>Step 3. Create the blank package <code>TestPackage</code> using <code>PkgTemplates</code></p> <li><p>Step 5. Test the package and upload the files to Github</p> </ul> <p>Now let us take a look at the steps in detail.</p> <h3 id=step_0_the_inner_mechanism_of_the_package ><a href="#step_0_the_inner_mechanism_of_the_package" class=header-anchor >Step 0. The inner mechanism of the package</a></h3> <p>In this step, we take a look at what our package is intended to do. We are given a quadratic function <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy=false >(</mo><mi>x</mi><mo stretchy=false >)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>T</mi></msup><mi>A</mi><mi>x</mi><mo>+</mo><msup><mi>b</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">f(x) = \frac{1}{2}x^{T}Ax+b^{T}x+c</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class=mopen >(</span><span class="mord mathnormal">x</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1.190108em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mord ><span class="mord mathnormal">x</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">A</span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.924661em;vertical-align:-0.08333em;"></span><span class=mord ><span class="mord mathnormal">b</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.8413309999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span>, where <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>∈</mo><msup><mi mathvariant=bold >R</mi><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">A \in \mathbf{R}^{n \times n}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">A</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.771331em;vertical-align:0em;"></span><span class=mord ><span class="mord mathbf">R</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">×</span><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> is a positive semidefinite matrix, <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>∈</mo><msup><mi mathvariant=bold >R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex"> b\in\mathbf{R}^{n} </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">b</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68611em;vertical-align:0em;"></span><span class=mord ><span class="mord mathbf">R</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> is a column vector, and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>∈</mo><mi mathvariant=bold >R</mi></mrow><annotation encoding="application/x-tex"> c\in\mathbf{R} </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">c</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68611em;vertical-align:0em;"></span><span class="mord mathbf">R</span></span></span></span> is a scalar. Our goal is to compute the proximal map of the function <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> at a point <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>∈</mo><msup><mi mathvariant=bold >R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">v\in\mathbf{R}^{n}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.68611em;vertical-align:0em;"></span><span class=mord ><span class="mord mathbf">R</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span> for the parameter <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi><mo>∈</mo><msub><mi mathvariant=bold >R</mi><mrow><mo>+</mo><mo>+</mo></mrow></msub></mrow><annotation encoding="application/x-tex">\gamma\in\mathbf{R}_{++}</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >∈</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.894441em;vertical-align:-0.208331em;"></span><span class=mord ><span class="mord mathbf">R</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.25833100000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">++</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>, which is given by the following formula:</p> <span class=katex-display ><span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML" display=block ><semantics><mrow><msub><mrow><mi mathvariant=bold >p</mi><mi mathvariant=bold >r</mi><mi mathvariant=bold >o</mi><mi mathvariant=bold >x</mi></mrow><mrow><mi>γ</mi><mi>f</mi></mrow></msub><mo stretchy=false >(</mo><mi>v</mi><mo stretchy=false >)</mo><mo>=</mo><mo stretchy=false >(</mo><mi>I</mi><mo>+</mo><mi>γ</mi><mi>A</mi><msup><mo stretchy=false >)</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=false >(</mo><mi>v</mi><mo>−</mo><mi>γ</mi><mi>b</mi><mo stretchy=false >)</mo><mi mathvariant=normal >.</mi></mrow><annotation encoding="application/x-tex"> \mathbf{prox}_{\gamma f}(v)=(I+\gamma A)^{-1}(v-\gamma b). </annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.130248em;vertical-align:-0.380248em;"></span><span class=mord ><span class=mord ><span class="mord mathbf">prox</span></span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.2419679999999999em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05556em;">γ</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.380248em;"><span></span></span></span></span></span></span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mord mathnormal">A</span><span class=mclose ><span class=mclose >)</span><span class=msupsub ><span class=vlist-t ><span class=vlist-r ><span class=vlist  style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">γb</span><span class=mclose >)</span><span class=mord >.</span></span></span></span></span> <h4 id=structure_of_the_package ><a href="#structure_of_the_package" class=header-anchor >Structure of the package</a></h4> <p>We can structure our package in two parts: source code in the <code>src</code> folder, and a bunch of test files in the <code>test</code> folder. We will use a julia package named <code>PkgTemplates</code> that will create the aforementioned structure automatically for us. For now, let us just briefly take a look at the skeleton of our code.</p> <p><strong>1. <code>src</code> folder</strong>: The <code>src</code> folder has the following parts.</p> <ul> <li><p><em><code>Types.jl</code></em> In this julia file, we store different data types to represent our problem data, parameter, and the output. The problem data essentially comprises of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo separator=true >,</mo><mi>b</mi><mo separator=true >,</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">A,b,c</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">A</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">b</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">c</span></span></span></span>. We will construct a data type <code>testPackageProblem</code> that will contain these matrices. Then, in the proximal map computation we have the parameter <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span></span></span></span>, which can be seen as a setting for our solver; we will create a data type called <code>testPackageSetting</code> that will contain this. Finally, our output vector will be stored in a data type named <code>testPackageResult</code>.</p> </ul> <ul> <li><p><em><code>Utils.jl</code></em> This file contains a function for matrix inversion using the dependecy package <code>LinearAlgebra</code>.</p> </ul> <ul> <li><p><em><code>TestPackage.jl</code></em> This is the main julia file corresponding to our package, indicated by its name. It will include both <code>Types.jl</code> and <code>Utils.jl</code>, and contain the main solver function called <code>solver_prox_quad</code>.</p> </ul> <p><strong>2. <code>test</code> folder</strong>: The test folder has file called <code>runtests.jl</code>, where we run our solver to different test datasets and see if everything is working as expected.</p> <h3 id=step_1_ensure_git_and_github_are_set_up_properly ><a href="#step_1_ensure_git_and_github_are_set_up_properly" class=header-anchor >Step 1. Ensure <code>Git</code> and <code>Github</code> are set up properly</a></h3> <p>Our package is going to reside in <code>Github</code> for version control purpose, so we need to create a free account first. Also, for version control, we need to have <code>git</code> installed on our computer as well. A very good instruction on how to perform these steps can be found <a href="https://julia.quantecon.org/more_julia/version_control.html">here</a>.</p> <h3 id=step_2_install_a_few_helpful_packages_for_package_development ><a href="#step_2_install_a_few_helpful_packages_for_package_development" class=header-anchor >Step 2. Install a few helpful packages for package development</a></h3> <p>Two very nice packages that can facilitate our package development by a significant margin are <code>PkgTemplates</code> and <code>Revise</code>. We install both packages first from Julia REPL.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Pkg</code></pre>
<pre><code class="julia hljs">Pkg.add(<span class=hljs-string >&quot;PkgTemplates&quot;</span>)</code></pre>
<pre><code class="julia hljs">Pkg.add(<span class=hljs-string >&quot;Revise&quot;</span>)</code></pre>
<p>A very convenient thing to do is to load <code>Revise</code> during startup. For this, please follow the instructions at this <a href="https://timholy.github.io/Revise.jl/stable/config/#Using-Revise-by-default-1">link</a>.</p>
<h3 id=step_3_create_the_blank_package_testpackage_using_pkgtemplates ><a href="#step_3_create_the_blank_package_testpackage_using_pkgtemplates" class=header-anchor >Step 3. Create the blank package <code>TestPackage</code> using <code>PkgTemplates</code></a></h3>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> PkgTemplates</code></pre>
<p>Now create a specific template for our project.</p>
<pre><code class="julia hljs">template = Template(user = <span class=hljs-string >&quot;shuvomoy&quot;</span>) <span class=hljs-comment ># change it to your specification</span></code></pre>
<p>Now let us generate the package &#40;empty for now&#41;.</p>
<pre><code class="julia hljs">generate(<span class=hljs-string >&quot;TestPackage&quot;</span>, template)</code></pre>
<p>As seen in the output above, the package is located at the folder <code>C:\Users\shuvo\.julia\dev\TestPackage</code>, copy this location; we are going to use it soon.</p>
<p><strong>Adding the project to the Julia Package Manager.</strong> We need to go through the following steps, so that Julia&#39;s package manager knows about our project.</p>
<p>First, in the Julia REPL type the following: </p>
<pre><code class="julia hljs">cd(<span class=hljs-string >&quot;C:\\Users\\shuvo\\.julia\\dev\\TestPackage&quot;</span>)
<span class=hljs-comment ># alternatively The following will also work</span>
<span class=hljs-comment ># cd(joinpath(DEPOT_PATH[1], &quot;dev&quot;, &quot;TestPackage&quot;))</span></code></pre>
<pre><code class="julia hljs">] activate <span class=hljs-comment ># this will get us into the main Julia environment</span></code></pre>
<pre><code class="julia hljs">] dev . <span class=hljs-comment ># this adds our package TestPackage</span></code></pre>
<pre><code class="julia hljs">] st <span class=hljs-comment ># this is to see the change in our default package list</span></code></pre>
<h3 id=step_4_create_the_julia_files ><a href="#step_4_create_the_julia_files" class=header-anchor >Step 4. Create the julia files</a></h3>
<h4 id=files_in_src_folder ><a href="#files_in_src_folder" class=header-anchor >Files in <code>src</code> folder ##</a></h4>
<p><strong>Description of <code>Utils.jl</code></strong></p>
<p>Create a file named <code>Utils.jl</code> in the <code>src</code> folder and copy the following code into it.</p>
<pre><code class="julia hljs"><span class=hljs-comment ># create a file named Utils.jl and copy the following code</span>
<span class=hljs-keyword >import</span> LinearAlgebra <span class=hljs-comment ># note that we are using another package LinearAlgebra in our file,</span>
<span class=hljs-comment ># so we need to add this package to the list of dependencies for our package</span>

<span class=hljs-keyword >function</span> mat_inv(A)
    <span class=hljs-keyword >return</span> LinearAlgebra.pinv(A)
<span class=hljs-keyword >end</span></code></pre>
<p>Note that in the code above, we have used the package <code>LinearAlgebra</code>. So, we need to add this package to the list of dependencies for our package. We can do that as follows.</p>
<pre><code class="julia hljs">] activate TestPackage</code></pre>
<pre><code class="julia hljs">] add LinearAlgebra</code></pre>
<p>To quit the active environment and return to the base again we can run the following.</p>
<pre><code class="julia hljs">] activate</code></pre>
<p><strong>Description of <code>Types.jl</code></strong></p>
<p>Create a file named <code>Types.jl</code> in the <code>src</code> folder and copy the following code into it.</p>
<pre><code class="julia hljs"><span class=hljs-comment ># testPackageResult represents the result</span>
<span class=hljs-keyword >struct</span> testPackageResult
    x::<span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Float64</span>}
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># testPackageProblem contains the problem data</span>

<span class=hljs-keyword >mutable struct</span> testPackageProblem
    A::<span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Float64</span>,<span class=hljs-number >2</span>}
    b::<span class=hljs-built_in >Array</span>{<span class=hljs-built_in >Float64</span>}
    c::<span class=hljs-built_in >Float64</span>
    <span class=hljs-comment ># constructor</span>
    <span class=hljs-keyword >function</span> testPackageProblem(A,b,c)
        new(A,b,c)
    <span class=hljs-keyword >end</span>
<span class=hljs-keyword >end</span>

<span class=hljs-comment ># testPackageSetting contains the problem setting, i.e., the parameter γ as set by the user</span>

<span class=hljs-keyword >struct</span> testPackageSetting
    γ::<span class=hljs-built_in >Float64</span>
    <span class=hljs-comment ># constructor</span>
    <span class=hljs-keyword >function</span> testPackageSetting(;γ = <span class=hljs-number >1</span>)
        new(γ)
    <span class=hljs-keyword >end</span>
<span class=hljs-keyword >end</span></code></pre>
<p><strong>Description of <code>TestPackage.jl</code></strong></p>
<p>Create <code>TestPackage.jl</code> file in the <code>src</code> folder, and copy the following code in the file. Note that we are including both <code>Types.jl</code> and <code>Utils.jl</code> and exporting the name of contents, so that when we invoke <code>using TestPackage</code>, we can use those functions.</p>
<pre><code class="julia hljs"><span class=hljs-keyword >module</span> TestPackage

include(<span class=hljs-string >&quot;./Types.jl&quot;</span>)

<span class=hljs-keyword >export</span> testPackageResult, testPackageProblem, testPackageSetting <span class=hljs-comment ># so that the user can uses the types from the main module, see how to use this types in runtest.jl</span>

include(<span class=hljs-string >&quot;./Utils.jl&quot;</span>)

<span class=hljs-keyword >export</span> mat_inv <span class=hljs-comment ># so that the we can use the functions from the main module</span>

<span class=hljs-keyword >function</span> solver_prox_quad(v, problem::testPackageProblem, setting::testPackageSetting)
    <span class=hljs-comment ># extract the problem data</span>
    A = problem.A
    b = problem.b
    c = problem.c
    <span class=hljs-comment ># extract the problem settings</span>
    γ = setting.γ
    <span class=hljs-comment ># compute the proximal parameter</span>
    mat_prox_quad = LinearAlgebra.pinv(LinearAlgebra.I + γ*A)
    prox_quad_v = mat_prox_quad*(v-γ*b)
    <span class=hljs-keyword >return</span> prox_quad_v
<span class=hljs-keyword >end</span>

<span class=hljs-keyword >export</span> solver_prox_quad

<span class=hljs-keyword >end</span> <span class=hljs-comment ># module</span></code></pre>
<h4 id=files_in_test_folder ><a href="#files_in_test_folder" class=header-anchor >Files in <code>test</code> folder</a></h4>
<p>Now that we have created the basic files for our package in the <code>src</code> folder, it is time now to test our code. To that goal, we create a file named <code>runtests.jl</code> in the <code>test</code> folder, where we have the following code.</p>
<pre><code class="julia hljs"><span class=hljs-comment >#### Files in `test` folder ##</span>
<span class=hljs-keyword >using</span> TestPackage
<span class=hljs-keyword >using</span> Test

<span class=hljs-meta >@testset</span> <span class=hljs-string >&quot;testing for a certain set of data&quot;</span> <span class=hljs-keyword >begin</span>
    <span class=hljs-comment ># Write your own tests here.</span>
    A = [ <span class=hljs-number >2.67485</span>     <span class=hljs-number >0.186124</span>   <span class=hljs-number >0.583946</span>  -<span class=hljs-number >0.145416</span>   <span class=hljs-number >0.401269</span>;
    -<span class=hljs-number >0.17813</span>     <span class=hljs-number >0.526082</span>  -<span class=hljs-number >0.325439</span>  -<span class=hljs-number >1.46627</span>   -<span class=hljs-number >3.09161</span> ;
    -<span class=hljs-number >1.52653</span>    -<span class=hljs-number >0.631375</span>  -<span class=hljs-number >0.618636</span>  -<span class=hljs-number >2.36654</span>    <span class=hljs-number >0.291429</span>;
    -<span class=hljs-number >0.609349</span>   -<span class=hljs-number >1.0533</span>    -<span class=hljs-number >0.323403</span>   <span class=hljs-number >1.34789</span>   -<span class=hljs-number >0.409167</span>;
    <span class=hljs-number >0.0687345</span>  -<span class=hljs-number >0.946264</span>  -<span class=hljs-number >0.118661</span>  -<span class=hljs-number >1.49908</span>   -<span class=hljs-number >1.30312</span>]

    A = A*A&#x27;

    A = (A+A&#x27;)/<span class=hljs-number >2</span>

    b = [ <span class=hljs-number >0.38052039048801956</span> ;
    <span class=hljs-number >0.5554436732038299</span> ;
    <span class=hljs-number >1.7334160203093987</span> ;
    <span class=hljs-number >0.4470254916964832</span> ;
    <span class=hljs-number >1.7676230141050555</span>]

    c = <span class=hljs-number >1.0</span>

    v = ones(<span class=hljs-number >5</span>)

    problem_data = testPackageProblem(A, b, c)

    problem_setting = testPackageSetting(γ = <span class=hljs-number >2.0</span>)

    result_approx = [<span class=hljs-number >0.10055689253917299</span>, <span class=hljs-number >0.24322623669390434</span>, <span class=hljs-number >0.0693976149433379</span>, <span class=hljs-number >0.09597235131516035</span>, -<span class=hljs-number >0.530323239453701</span>]

    <span class=hljs-meta >@test</span> solver_prox_quad(v, problem_data, problem_setting) ≈ result_approx

<span class=hljs-keyword >end</span>

<span class=hljs-comment ># we can potentially create more matrices like that</span></code></pre>
<h3 id=step_5_test_the_package_and_upload_the_files_to_github ><a href="#step_5_test_the_package_and_upload_the_files_to_github" class=header-anchor >Step 5. Test the package and upload the files to Github</a></h3>
<p>Now we are in a position to test our package. We can do that in one of the following ways. We can just run the <code>runtests.jl</code> file from an editor such as Atom, and run it by pressing <code>shift-enter</code>.</p>
<p>Another way is open the Julia REPL, and run the following code.</p>
<pre><code class="julia hljs">] test TestPackage</code></pre>
<p>So, everything is working fine&#33;</p>
<p><strong>Add the package to Github.</strong> Now, we just add our package to Git version control system. Go to your Github account, create a new repository with name <code>TestPackage.jl</code>. In the package creation page, please keep the boxes unchecked for the <code>README.md</code>, <code>LICENSE</code>, and <code>.gitignore</code>, because these are already taken care of when we created our package using <code>PkgTemplates</code>. Next, drag and drop the folder from our <code>~/.julia/dev</code> directory &#40;to be specific, the contents of the folder <code>C:\Users\shuvo\.julia\dev\TestPackage</code>&#41; to Github desktop. The final step is to click the <code>publish branch</code> button to upload our files to Github.</p>
<p>We are done creating a simple working Julia package&#33;</p>
<div class=page-foot >
  <div class=copyright >
    &copy; Shuvomoy Das Gupta. Last modified: May 03, 2025. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>
        </div> 
    </div>